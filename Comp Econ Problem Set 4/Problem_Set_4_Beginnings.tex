\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}

\title{Problem Set 1}
\author{Tony Lashley}
\date{April 30, 2015}

\usepackage{mathtools}
\usepackage{graphicx}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

\section{Function Approximation Warmup}
\subsection{Exploring and downloading the data}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{rm}\hlstd{(}\hlkwc{list}\hlstd{=}\hlkwd{ls}\hlstd{())}           \hlcom{# Clear the workspace}
\hlkwd{set.seed}\hlstd{(}\hlnum{20866}\hlstd{)}
\hlkwd{library}\hlstd{(ggplot2)}
\hlkwd{library}\hlstd{(sandwich)}
\hlkwd{library}\hlstd{(car)}
\hlkwd{library}\hlstd{(xtable)}
\hlkwd{library}\hlstd{(aod)}
\hlkwd{library}\hlstd{(systemfit)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required package: Matrix\\\#\# Loading required package: lmtest\\\#\# Loading required package: zoo\\\#\# \\\#\# Attaching package: 'zoo'\\\#\# \\\#\# The following objects are masked from 'package:base':\\\#\# \\\#\#\ \ \ \  as.Date, as.Date.numeric}}\begin{alltt}
\hlkwd{library}\hlstd{(MASS)}
\hlkwd{library}\hlstd{(stargazer)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \\\#\# Please cite as: \\\#\# \\\#\#\ \ Hlavac, Marek (2014). stargazer: LaTeX code and ASCII text for well-formatted regression and summary statistics tables.\\\#\#\ \ R package version 5.1. http://CRAN.R-project.org/package=stargazer}}\begin{alltt}
\hlkwd{setwd}\hlstd{(}\hlstr{"/Users/Tony/Downloads"}\hlstd{)}

\hlstd{data} \hlkwb{<-} \hlkwd{read.csv}\hlstd{(}\hlstr{"cps_00005.csv"}\hlstd{)}
\hlstd{datamatrix} \hlkwb{<-} \hlkwd{as.matrix}\hlstd{(}\hlkwd{read.csv}\hlstd{(}\hlstr{"cps_00005.csv"}\hlstd{))}
\hlstd{datamatrix} \hlkwb{<-} \hlstd{datamatrix[,}\hlopt{-}\hlnum{5}\hlopt{:-}\hlnum{8}\hlstd{]}
\hlstd{datamatrix} \hlkwb{<-} \hlstd{datamatrix[,}\hlopt{-}\hlnum{2}\hlopt{:-}\hlnum{3}\hlstd{]}

\hlstd{AdjInc} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlkwd{rep}\hlstd{(}\hlnum{NA}\hlstd{,} \hlkwd{nrow}\hlstd{(datamatrix)))}

\hlstd{datamatrix} \hlkwb{<-} \hlkwd{cbind}\hlstd{(datamatrix, AdjInc)}

\hlstd{datamatrix} \hlkwb{<-} \hlstd{datamatrix[datamatrix[,}\hlnum{9}\hlstd{]}\hlopt{!=} \hlnum{0}\hlstd{,]}
\hlstd{datamatrix} \hlkwb{<-} \hlstd{datamatrix[datamatrix[,}\hlnum{9}\hlstd{]}\hlopt{!=} \hlnum{9999999}\hlstd{,]}



\hlstd{incomeadjust} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{data.m} \hlstd{= datamatrix)\{}

  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlkwd{nrow}\hlstd{(datamatrix))\{}

    \hlstd{year} \hlkwb{<-} \hlkwd{as.numeric}\hlstd{(datamatrix[i,}\hlnum{1}\hlstd{])}
    \hlstd{income} \hlkwb{<-} \hlkwd{as.numeric}\hlstd{(datamatrix[i,}\hlnum{9}\hlstd{])}

    \hlkwa{if} \hlstd{(year} \hlopt{==} \hlnum{2004}\hlstd{)\{}

      \hlstd{AdjustedIncome} \hlkwb{<-} \hlstd{income} \hlopt{*} \hlnum{1.25}
      \hlstd{datamatrix[i,}\hlnum{10}\hlstd{]} \hlkwb{=} \hlkwd{round}\hlstd{(AdjustedIncome)}
    \hlstd{\}}

    \hlkwa{if} \hlstd{(year} \hlopt{==} \hlnum{2014}\hlstd{)\{}

      \hlstd{AdjustedIncome} \hlkwb{<-} \hlstd{income}
      \hlstd{datamatrix[i,}\hlnum{10}\hlstd{]} \hlkwb{=} \hlkwd{round}\hlstd{(AdjustedIncome)}
    \hlstd{\}}


  \hlstd{\}}


  \hlstd{top} \hlkwb{<-} \hlkwd{head}\hlstd{(datamatrix,} \hlkwc{n}\hlstd{=}\hlnum{5}\hlstd{)}
  \hlstd{bottom}\hlkwb{<-} \hlkwd{tail}\hlstd{(datamatrix,} \hlkwc{n}\hlstd{=}\hlnum{5}\hlstd{)}

  \hlstd{sample} \hlkwb{<-} \hlkwd{rbind}\hlstd{(top,bottom)}
  \hlkwd{return}\hlstd{(sample)}

\hlstd{\}}

\hlkwd{incomeadjust}\hlstd{(datamatrix)}
\end{alltt}
\begin{verbatim}
##           YEAR REGION AGE SEX RACE EDUC99 EMPSTAT HRSWORK INCWAGE AdjInc
##           2004     11  59   2  100     13      10       2   60000  75000
##           2004     11  49   1  100     10      10      20   32000  40000
##           2004     11  42   2  100     15      10      40   30000  37500
##           2004     11  68   2  100     15      10      20   18000  22500
##           2004     11  42   2  100     10      10      24   30000  37500
## [168263,] 2014     42  26   1  652     10      10      32   39000  39000
## [168264,] 2014     42  20   1  652     10      30       0    3480   3480
## [168265,] 2014     42  36   2  100     13      21       0   55300  55300
## [168266,] 2014     42  47   1  807     10      32       0   35000  35000
## [168267,] 2014     42  21   2  807     11      10      19   10300  10300
\end{verbatim}
\end{kframe}
\end{knitrout}

To find the CPI, I used the Bureau of Labor Statistics CPI Inflation Calculator, which told me that a dollar in 2004 has the same buying power as $1.25 in 2014. Therefore, to adjust 2004 income to its 2014 equivalent, I wrote a function that multiplied all 2004 incomes by $1.25.

\subsection{Make a new variable that is log wage income in your data}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{sample} \hlkwb{<-} \hlkwd{incomeadjust}\hlstd{(datamatrix)}
\hlstd{logVar} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlkwd{rep}\hlstd{(}\hlnum{NA}\hlstd{,} \hlkwd{nrow}\hlstd{(sample)))}
\hlstd{sample} \hlkwb{<-} \hlkwd{cbind}\hlstd{(sample, logVar)}



\hlstd{logVarf} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{data.m} \hlstd{= sample)\{}

  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlkwd{nrow}\hlstd{(sample))\{}

    \hlstd{rowIncomeLog} \hlkwb{<-} \hlkwd{log}\hlstd{(sample[i,}\hlnum{10}\hlstd{])}
    \hlstd{sample[i,}\hlnum{11}\hlstd{]} \hlkwb{<-} \hlstd{rowIncomeLog}

  \hlstd{\}}

  \hlcom{## return(datamatrix) Commenting out so it doesn't actually return this}
  \hlkwd{print}\hlstd{(sample)}

\hlstd{\}}

\hlkwd{logVarf}\hlstd{(sample)}
\end{alltt}
\begin{verbatim}
##           YEAR REGION AGE SEX RACE EDUC99 EMPSTAT HRSWORK INCWAGE AdjInc
##           2004     11  59   2  100     13      10       2   60000  75000
##           2004     11  49   1  100     10      10      20   32000  40000
##           2004     11  42   2  100     15      10      40   30000  37500
##           2004     11  68   2  100     15      10      20   18000  22500
##           2004     11  42   2  100     10      10      24   30000  37500
## [168263,] 2014     42  26   1  652     10      10      32   39000  39000
## [168264,] 2014     42  20   1  652     10      30       0    3480   3480
## [168265,] 2014     42  36   2  100     13      21       0   55300  55300
## [168266,] 2014     42  47   1  807     10      32       0   35000  35000
## [168267,] 2014     42  21   2  807     11      10      19   10300  10300
##              logVar
##           11.225243
##           10.596635
##           10.532096
##           10.021271
##           10.532096
## [168263,] 10.571317
## [168264,]  8.154788
## [168265,] 10.920528
## [168266,] 10.463103
## [168267,]  9.239899
\end{verbatim}
\end{kframe}
\end{knitrout}

\subsection{Construct "potential experience", which will be "Age - years of schooling - 5"}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{sample} \hlkwb{<-} \hlkwd{logVarf}\hlstd{(sample)}
\end{alltt}
\begin{verbatim}
##           YEAR REGION AGE SEX RACE EDUC99 EMPSTAT HRSWORK INCWAGE AdjInc
##           2004     11  59   2  100     13      10       2   60000  75000
##           2004     11  49   1  100     10      10      20   32000  40000
##           2004     11  42   2  100     15      10      40   30000  37500
##           2004     11  68   2  100     15      10      20   18000  22500
##           2004     11  42   2  100     10      10      24   30000  37500
## [168263,] 2014     42  26   1  652     10      10      32   39000  39000
## [168264,] 2014     42  20   1  652     10      30       0    3480   3480
## [168265,] 2014     42  36   2  100     13      21       0   55300  55300
## [168266,] 2014     42  47   1  807     10      32       0   35000  35000
## [168267,] 2014     42  21   2  807     11      10      19   10300  10300
##              logVar
##           11.225243
##           10.596635
##           10.532096
##           10.021271
##           10.532096
## [168263,] 10.571317
## [168264,]  8.154788
## [168265,] 10.920528
## [168266,] 10.463103
## [168267,]  9.239899
\end{verbatim}
\begin{alltt}
\hlstd{potExp} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlkwd{rep}\hlstd{(}\hlnum{NA}\hlstd{,} \hlkwd{nrow}\hlstd{(sample)))}
\hlstd{sample} \hlkwb{<-} \hlkwd{cbind}\hlstd{(sample, potExp)}

\hlstd{potExpf} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{data.m} \hlstd{= sample)\{}

  \hlkwa{for} \hlstd{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlkwd{nrow}\hlstd{(sample))\{}

    \hlstd{indAge} \hlkwb{=} \hlkwd{as.numeric}\hlstd{(sample[i,}\hlnum{3}\hlstd{])}
    \hlstd{indEduCode} \hlkwb{=} \hlkwd{as.numeric}\hlstd{(sample[i,}\hlnum{6}\hlstd{])}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{<} \hlnum{6}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{9}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{6}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{10}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{7}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{11}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{8}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{12}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{9}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{13}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{10}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{13}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{11}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{14}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{12}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{15}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{13}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{15}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{14}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{15}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{15}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{17}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{16}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{19}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{17}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{19}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

    \hlkwa{if} \hlstd{(indEduCode} \hlopt{==} \hlnum{18}\hlstd{)\{}
      \hlstd{indYrsOfSch} \hlkwb{=} \hlnum{22}
      \hlstd{indPotExp} \hlkwb{=} \hlstd{indAge} \hlopt{-} \hlstd{indYrsOfSch} \hlopt{-} \hlnum{5}
      \hlstd{sample[i,}\hlnum{12}\hlstd{]} \hlkwb{=} \hlstd{indPotExp}

    \hlstd{\}}

  \hlstd{\}}

  \hlcom{## return(datamatrix) Commenting out so it doesn't actually return this}
  \hlkwd{print}\hlstd{(sample)}

\hlstd{\}}

\hlkwd{potExpf}\hlstd{(sample)}
\end{alltt}
\begin{verbatim}
##           YEAR REGION AGE SEX RACE EDUC99 EMPSTAT HRSWORK INCWAGE AdjInc
##           2004     11  59   2  100     13      10       2   60000  75000
##           2004     11  49   1  100     10      10      20   32000  40000
##           2004     11  42   2  100     15      10      40   30000  37500
##           2004     11  68   2  100     15      10      20   18000  22500
##           2004     11  42   2  100     10      10      24   30000  37500
## [168263,] 2014     42  26   1  652     10      10      32   39000  39000
## [168264,] 2014     42  20   1  652     10      30       0    3480   3480
## [168265,] 2014     42  36   2  100     13      21       0   55300  55300
## [168266,] 2014     42  47   1  807     10      32       0   35000  35000
## [168267,] 2014     42  21   2  807     11      10      19   10300  10300
##              logVar potExp
##           11.225243     39
##           10.596635     31
##           10.532096     20
##           10.021271     46
##           10.532096     24
## [168263,] 10.571317      8
## [168264,]  8.154788      2
## [168265,] 10.920528     16
## [168266,] 10.463103     29
## [168267,]  9.239899      2
\end{verbatim}
\end{kframe}
\end{knitrout}

\end{document}
